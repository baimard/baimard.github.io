

<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>5. Serveur freeradius &mdash; Documentation Adacis presente : AYA 1</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/my_theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="6. Installation de la solution" href="installation.html" />
    <link rel="prev" title="4. Serveur de validation" href="validation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Adacis presente : AYA
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Sommaire</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="presentation.html">1. Présentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="bdd.html">2. Base de données</a></li>
<li class="toctree-l1"><a class="reference internal" href="ksm.html">3. Serveur KSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">4. Serveur de validation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. Serveur freeradius</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#release">5.1. Release</a></li>
<li class="toctree-l2"><a class="reference internal" href="#presentation">5.2. Présentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#image-docker">5.3. Image Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker-compose">5.4. Docker compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fichiers-de-configuration">5.5. Fichiers de configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#default">5.5.1. default</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sql">5.5.2. sql</a></li>
<li class="toctree-l3"><a class="reference internal" href="#proxy-conf">5.5.3. proxy.conf</a></li>
<li class="toctree-l3"><a class="reference internal" href="#radiusd">5.5.4. radiusd</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation">5.6. installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#insertion-d-un-client-nas">5.7. Insertion d’un client NAS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">6. Installation de la solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="web.html">7. Serveur de gestion</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">8. Poste client</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">9. Command BASH</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Adacis presente : AYA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">5. </span>Serveur freeradius</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/radius.rst.txt" rel="nofollow"> Afficher la source de la page</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="serveur-freeradius">
<span id="radius"></span><h1><span class="section-number">5. </span>Serveur freeradius<a class="headerlink" href="#serveur-freeradius" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="release">
<h2><span class="section-number">5.1. </span>Release<a class="headerlink" href="#release" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p>0.3 -&gt; ajout d’un dictionnaire avec l’attribut password-temporaire, intégration du code pin avant un otp yubikey</p></li>
</ul>
</div>
<div class="section" id="presentation">
<h2><span class="section-number">5.2. </span>Présentation<a class="headerlink" href="#presentation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le serveur <a class="reference external" href="https://wiki.freeradius.org/Home">freeradius</a> est un service qui écoute sur le port 1812, il intégre le protocole RADIUS (<a class="reference external" href="https://tools.ietf.org/html/rfc2865">RFC 2865</a>).</p>
<p>Globalement les échanges se déroulent comme suit :</p>
<ul class="simple">
<li><p>Il y  a une requête Access-Request</p></li>
<li><p>Le serveur radius la reçoit et utilise le protocole d’authentification associé</p></li>
<li><p>Le serveur traite la demande</p></li>
<li><p>Il renvoie un paquet Access-Accept ou Access-Reject</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<p>Le serveur peut déléguer l’authentification à un autre serveur radius selon des conditions. Dans ce cas, il effectuera une sorte de routage du paquet.</p>
</div>
</div>
<div class="section" id="image-docker">
<h2><span class="section-number">5.3. </span>Image Docker<a class="headerlink" href="#image-docker" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’image docker utilise le multistage Docker, cela permet de faire une image intermédiaire. Cette action est effectuée pour compiler un module qui n’a pas encore été propagé suite à des modifications. Le module concerné est le <a class="reference external" href="https://github.com/Yubico/yubico-pam">YUBICO-PAM module</a>. Il permet notamment au radius d’interroger le serveur de validation yubico. Les dernières modifications qui ont été embarquées permettent de stocker dans une base de données la correspondance entre un utilisateur et une clef yubikey. (Fichier original yubikey-mapping)</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">ARG from=ubuntu:18.04</span>
<span class="l l-Scalar l-Scalar-Plain">FROM ${from} as builder</span>
<span class="l l-Scalar l-Scalar-Plain">ARG DEBIAN_FRONTEND=noninteractive</span>

<span class="l l-Scalar l-Scalar-Plain">RUN apt-get update</span>
<span class="l l-Scalar l-Scalar-Plain">RUN apt-get install -y libpam0g-dev libykclient-dev libykpers-1-dev libyubikey-dev asciidoc-base libmysqlclient-dev gcc make curl libtool autoconf automake pkg-config libpam-dev curl</span>

<span class="l l-Scalar l-Scalar-Plain">ADD https://github.com/baimard/yubico-pam/archive/master.zip /yubico-pam.zip</span>

<span class="l l-Scalar l-Scalar-Plain">RUN unzip /yubico-pam.zip</span>
<span class="l l-Scalar l-Scalar-Plain">RUN rm yubico-pam.zip ; mv yubico-pam-master yubico-pam</span>

<span class="l l-Scalar l-Scalar-Plain">WORKDIR /yubico-pam</span>
<span class="l l-Scalar l-Scalar-Plain">RUN autoreconf -fi</span>
<span class="l l-Scalar l-Scalar-Plain">WORKDIR /opt</span>
<span class="l l-Scalar l-Scalar-Plain">RUN /yubico-pam/configure --prefix=&quot;$PWD/inst&quot; --without-ldap</span>
<span class="l l-Scalar l-Scalar-Plain">RUN make -j8</span>
<span class="l l-Scalar l-Scalar-Plain">RUN make install</span>

<span class="l l-Scalar l-Scalar-Plain">FROM ${from} as build</span>

<span class="l l-Scalar l-Scalar-Plain">RUN apt update &amp;&amp; apt full-upgrade -y</span>
<span class="l l-Scalar l-Scalar-Plain">RUN apt-get install -y freeradius libpam0g-dev freeradius-mysql libykclient-dev libykpers-1-dev libyubikey-dev libmariadb3 libmysqlclient-dev</span>

<span class="l l-Scalar l-Scalar-Plain">RUN ln -s /etc/freeradius/3.0/mods-available/pam /etc/freeradius/3.0/mods-enabled/pam</span>
<span class="l l-Scalar l-Scalar-Plain">RUN ln -s /etc/freeradius/3.0/mods-available/sql /etc/freeradius/3.0/mods-enabled/sql</span>

<span class="l l-Scalar l-Scalar-Plain">RUN rm /etc/freeradius/3.0/sites-enabled/inner-tunnel</span>
<span class="l l-Scalar l-Scalar-Plain">RUN rm /etc/freeradius/3.0/mods-enabled/eap</span>

<span class="l l-Scalar l-Scalar-Plain">#PAM ADD</span>
<span class="l l-Scalar l-Scalar-Plain">COPY --from=builder /opt/inst/lib/security/pam_yubico.so /usr/lib/security/pam_yubico.so</span>

<span class="l l-Scalar l-Scalar-Plain">COPY docker-entrypoint.sh /</span>

<span class="l l-Scalar l-Scalar-Plain">RUN chown root:root /docker-entrypoint.sh</span>
<span class="l l-Scalar l-Scalar-Plain">RUN chmod 755 /docker-entrypoint.sh</span>

<span class="l l-Scalar l-Scalar-Plain">EXPOSE 1812/udp 1813/udp</span>

<span class="l l-Scalar l-Scalar-Plain">ENTRYPOINT [&quot;/docker-entrypoint.sh&quot;]</span>

<span class="l l-Scalar l-Scalar-Plain">CMD [&quot;freeradius&quot;, &quot;-X&quot;]</span>


<span class="l l-Scalar l-Scalar-Plain"># COMPILE cd ~/Documents/yubicoServeurOtp/build_freeradius &amp;&amp; docker build . -t juxo/freeradius-dev &amp;&amp; cd ~/Documents/yubicoServeurOtp/projet_auth/ &amp;&amp; docker-compose up -d freeradius &amp;&amp; docker-compose logs -f freeradius</span>
</pre></div>
</div>
</div>
<div class="section" id="docker-compose">
<h2><span class="section-number">5.4. </span>Docker compose<a class="headerlink" href="#docker-compose" title="Lien permanent vers ce titre">¶</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3.8&#39;</span>
<span class="nt">services</span><span class="p">:</span>
 <span class="nt">freeradius</span><span class="p">:</span>
   <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">juxo/freeradius:0.3</span>
   <span class="nt">container_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">freeradius</span>
   <span class="nt">environment</span><span class="p">:</span>
     <span class="nt">USER</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${USERDB}</span>
     <span class="nt">PASSWORD</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${PASSWORDDB}</span>
     <span class="nt">DATABASE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${DATABASE}</span>
     <span class="nt">DATABASEIP</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${DATABASEIP}</span>
   <span class="nt">volumes</span><span class="p">:</span>
     <span class="p p-Indicator">-</span> <span class="s">&quot;./conf_freeradius/proxy.conf:/etc/freeradius/3.0/proxy.conf&quot;</span>
     <span class="p p-Indicator">-</span> <span class="s">&quot;./conf_freeradius/sql:/etc/freeradius/3.0/mods-available/sql&quot;</span>
     <span class="p p-Indicator">-</span> <span class="s">&quot;./conf_freeradius/default:/etc/freeradius/3.0/sites-available/default&quot;</span>
     <span class="p p-Indicator">-</span> <span class="s">&quot;./conf_freeradius/radiusd:/etc/pam.d/radiusd:ro&quot;</span>
   <span class="nt">ports</span><span class="p">:</span>
     <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">1812:1812/udp</span>
</pre></div>
</div>
</div>
<div class="section" id="fichiers-de-configuration">
<h2><span class="section-number">5.5. </span>Fichiers de configuration<a class="headerlink" href="#fichiers-de-configuration" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="default">
<h3><span class="section-number">5.5.1. </span>default<a class="headerlink" href="#default" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p><strong>la section listen</strong> : Permet de mettre à l’écoute le serveur</p></li>
<li><p><strong>authorize</strong> : permet de contrôler la cohérence de la requête et l’existence de l’utilisateur</p></li>
<li><p><strong>autenticate</strong> : permet de contrôler que le secret utilisé est acceptable pour authentifier l’utilisateur</p></li>
<li><p><strong>preacct</strong> : opération avant la mise en log des traces</p></li>
<li><p><strong>accounting</strong> : log</p></li>
<li><p><strong>post-auth</strong> : après une authentification une série d’action en fonction de ce qui a été validé</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>server default <span class="o">{</span>

    listen <span class="o">{</span>
        <span class="nb">type</span> <span class="o">=</span> auth
        <span class="nv">ipaddr</span> <span class="o">=</span> *
        <span class="nv">port</span> <span class="o">=</span> <span class="m">0</span>
        limit <span class="o">{</span>

            <span class="nv">max_connections</span> <span class="o">=</span> <span class="m">16</span>
            <span class="nv">lifetime</span> <span class="o">=</span> <span class="m">0</span>
            <span class="nv">idle_timeout</span> <span class="o">=</span> <span class="m">30</span>
        <span class="o">}</span>
    <span class="o">}</span>

    listen <span class="o">{</span>
        <span class="nb">type</span> <span class="o">=</span> acct
        <span class="nv">ipaddr</span> <span class="o">=</span> *
        <span class="nv">port</span> <span class="o">=</span> <span class="m">0</span>

        limit <span class="o">{</span>

            <span class="nv">max_connections</span> <span class="o">=</span> <span class="m">16</span>
            <span class="nv">lifetime</span> <span class="o">=</span> <span class="m">0</span>
            <span class="nv">idle_timeout</span> <span class="o">=</span> <span class="m">30</span>
        <span class="o">}</span>
    <span class="o">}</span>

    authorize <span class="o">{</span>
        filter_username
        preprocess

        <span class="c1">#files</span>
        sql
        <span class="k">if</span><span class="o">(</span>!ok<span class="o">){</span>
            <span class="c1"># Delegation d&#39;authentification</span>
            suffix
        <span class="o">}</span>

        <span class="c1">#Pour les MDP en clair</span>
        pap
        expiration
        logintime
    <span class="o">}</span>

    authenticate <span class="o">{</span>
        <span class="c1">#Pour les MDP en clair</span>
        Auth-Type PAP <span class="o">{</span>
            pap
        <span class="o">}</span>

        Auth-Type PAM <span class="o">{</span>
            pam
        <span class="o">}</span>
        pam
    <span class="o">}</span>

    preacct <span class="o">{</span>
        preprocess
    <span class="c1">#       update request {</span>
    <span class="c1">#               &amp;FreeRADIUS-Acct-Session-Start-Time = &quot;%{expr: %l - %{%{Acct-Session-Time}:-0} - %{%{Acct-Delay-Time}:-0}}&quot;</span>
    <span class="c1">#       }</span>
        <span class="c1">#files</span>
    <span class="o">}</span>

    accounting <span class="o">{</span>
        detail
        unix
        -sql
        <span class="nb">exec</span>
        attr_filter.accounting_response
    <span class="o">}</span>

    session <span class="o">{</span>

    <span class="o">}</span>

    post-auth <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span>session-state:User-Name <span class="o">&amp;&amp;</span> reply:User-Name <span class="o">&amp;&amp;</span> request:User-Name <span class="o">&amp;&amp;</span> <span class="o">(</span>reply:User-Name <span class="o">==</span> request:User-Name<span class="o">))</span> <span class="o">{</span>
            update reply <span class="o">{</span>
                <span class="p">&amp;</span>User-Name !* ANY
            <span class="o">}</span>
        <span class="o">}</span>
        update <span class="o">{</span>
            <span class="p">&amp;</span>reply: +<span class="o">=</span> <span class="p">&amp;</span>session-state:
        <span class="o">}</span>

        -sql
        <span class="nb">exec</span>

        Post-Auth-Type REJECT <span class="o">{</span>
            -sql
            attr_filter.access_reject
        <span class="o">}</span>

    <span class="o">}</span>

    pre-proxy <span class="o">{</span>
        <span class="c1">#files</span>
    <span class="o">}</span>

    post-proxy <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sql">
<h3><span class="section-number">5.5.2. </span>sql<a class="headerlink" href="#sql" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il s’agit du fichier de configuration SQL. Le fichier est conforme à celui fourni par le service Freeradius sauf sur les lignes permettant de se connecter à la base de données. Nous les avons modifiés pour pouvoir prendre en compte des variables d’environnement. Ainsi les variables passés au container docker via le fichier <strong>.env</strong> permettent de se connecter à la base de données.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">server</span> <span class="o">=</span> <span class="nv">$ENV</span><span class="o">{</span>DATABASEIP<span class="o">}</span>
<span class="nv">radius_db</span> <span class="o">=</span> <span class="nv">$ENV</span><span class="o">{</span>DATABASE<span class="o">}</span>
<span class="nv">login</span> <span class="o">=</span> <span class="nv">$ENV</span><span class="o">{</span>USER<span class="o">}</span>
<span class="nv">password</span> <span class="o">=</span> <span class="nv">$ENV</span><span class="o">{</span>PASSWORD<span class="o">}</span>
<span class="nv">port</span> <span class="o">=</span> <span class="m">3306</span>
</pre></div>
</div>
</div>
<div class="section" id="proxy-conf">
<h3><span class="section-number">5.5.3. </span>proxy.conf<a class="headerlink" href="#proxy-conf" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le fichier proxy.conf sert à faire une delegation à un service d’authentification. Il peut se base sur un nom de domaine ou faire des ations par défaut.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># home_server test1 {</span>
<span class="c1">#         type = auth+acct</span>
<span class="c1">#         ipaddr = 192.168.0.x</span>
<span class="c1">#         port = 1812</span>
<span class="c1">#         secret = xxxxx</span>
<span class="c1">#         require_message_authenticator = yes</span>
<span class="c1">#         response_window = 20</span>
<span class="c1">#         zombie_period = 40</span>
<span class="c1">#         revive_interval = 120</span>
<span class="c1">#         status_check = status-server</span>
<span class="c1">#         check_interval = 120</span>
<span class="c1">#         num_answers_to_alive = 3</span>
<span class="c1"># }</span>

<span class="c1"># home_server_pool mypool {</span>
<span class="c1">#         type = fail-over</span>
<span class="c1">#         home_server = test1</span>
<span class="c1"># }</span>

<span class="c1"># realm DEFAULT {</span>
<span class="c1">#         auth_pool       = mypool</span>
<span class="c1">#         acct_pool       = mypool</span>
<span class="c1"># }</span>
</pre></div>
</div>
</div>
<div class="section" id="radiusd">
<h3><span class="section-number">5.5.4. </span>radiusd<a class="headerlink" href="#radiusd" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il s’agit du fichier PAM embarqué spécialement dans le freeradius et appelé spéciphiquement par le freeradius dans sa configuration PAM.</p>
<p>Voici la documentation des variables qui sont utilisables. <a class="reference external" href="https://github.com/Yubico/yubico-pam#configuration">Git yubico-pam</a></p>
<p>Les options que nous utilisons :</p>
<ul class="simple">
<li><p><strong>auth sufficient</strong> Pour ne pas que freeradius contrôle le compte sur le serveur mais uniquement dans la base de données</p></li>
<li><p><strong>/usr/lib/security/pam_yubico.so</strong> url vers la librairie que nous avons compilée</p></li>
<li><p><strong>id=1</strong> identifiant à fournir pour savoir qui se connect pour le serveur de validation, ainsi nous pouvons distinguer la provenance de requête</p></li>
<li><p><strong>debug</strong> Devient verbeux pour les logs du freeradius</p></li>
<li><p><strong>urllist</strong> fourni une liste de serveur de validation qui seront appelé successivement si le premier ne répond pas</p></li>
<li><p><strong>mysql_XXX</strong> variable pour la connexion à la base de données mysql</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>auth sufficient /usr/lib/security/pam_yubico.so <span class="nv">id</span><span class="o">=</span><span class="m">1</span> debug <span class="nv">urllist</span><span class="o">=</span>http://val/wsapi/2.0/verify <span class="nv">mysql_server</span><span class="o">=</span>database <span class="nv">mysql_user</span><span class="o">=</span>otp <span class="nv">mysql_password</span><span class="o">=</span>otp <span class="nv">mysql_database</span><span class="o">=</span>otp
account sufficient /usr/lib/security/pam_yubico.so
</pre></div>
</div>
</div>
</div>
<div class="section" id="installation">
<h2><span class="section-number">5.6. </span>installation<a class="headerlink" href="#installation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une fois que les fichiers de configuration sont correctement paramétrés.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">docker-compose up -d freeradius</span>
</pre></div>
</div>
<p>Vous pouvez utiliser la commande <code class="docutils literal notranslate"><span class="pre">radtest</span></code> provenant du packet freeradius-utils, pour faire des essais de connexion.</p>
</div>
<div class="section" id="insertion-d-un-client-nas">
<h2><span class="section-number">5.7. </span>Insertion d’un client NAS<a class="headerlink" href="#insertion-d-un-client-nas" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p>Création d’un fichier sql avec à l’intérieur ceci :</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>INSERT INTO <span class="sb">`</span>nas<span class="sb">`</span> <span class="o">(</span><span class="sb">`</span>id<span class="sb">`</span>, <span class="sb">`</span>nasname<span class="sb">`</span>, <span class="sb">`</span>shortname<span class="sb">`</span>, <span class="sb">`</span><span class="nb">type</span><span class="sb">`</span>, <span class="sb">`</span>ports<span class="sb">`</span>, <span class="sb">`</span>secret<span class="sb">`</span>, <span class="sb">`</span>server<span class="sb">`</span>, <span class="sb">`</span>community<span class="sb">`</span>, <span class="sb">`</span>description<span class="sb">`</span><span class="o">)</span> VALUES <span class="o">(</span>NULL, <span class="s1">&#39;0.0.0.3/32&#39;</span>, <span class="s1">&#39;test&#39;</span>, <span class="s1">&#39;other&#39;</span>, NULL, <span class="s1">&#39;123456789&#39;</span>, NULL, NULL, <span class="s1">&#39;RADIUS Client&#39;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Insérer dans la base de données comme suit :</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker <span class="nb">exec</span> -i database sh -c <span class="s1">&#39;exec mysql -u $MYSQL_USER -p$MYSQL_PASSWORD -D $MYSQL_DATABASE&#39;</span> &lt; test.sql
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="installation.html" class="btn btn-neutral float-right" title="6. Installation de la solution" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="validation.html" class="btn btn-neutral float-left" title="4. Serveur de validation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Benjamin AIMARD.

    </p>
  </div>
    
    
    
    Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    
    fourni par <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>